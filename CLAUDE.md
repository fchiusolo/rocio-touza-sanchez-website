# CLAUDE.md - AI Assistant Guide

## Project Overview

This is a **professional bilingual website** for psychologist **Roc√≠o Touza Sanchez**, offering online therapy services with a focus on inclusive, culturally sensitive psychological care.

**Live Site**: https://rociotouzasanchez.com

**Project Type**: Single-page application (SPA) with bilingual support (Spanish/English)

**Hosting**: GitHub Pages with custom domain

---

## Technology Stack

| Technology | Purpose | Implementation |
|------------|---------|----------------|
| **11ty (Eleventy)** | Static site generator | Builds HTML from Nunjucks templates + JSON data |
| **Nunjucks** | Templating engine | Template language with layouts, includes, filters |
| **JSON** | Content data | Single source of truth for all content (es.json, en.json) |
| **Tailwind CSS** | Styling | CDN-based v3.x with custom config |
| **Vanilla JavaScript** | Interactivity | Mobile menu, smooth scrolling (minimal JS) |
| **GitHub Actions** | CI/CD pipeline | Automated build and deployment on push to main |
| **Open Sans Variable Font** | Typography | Self-hosted variable font (weights 300-800) |

### Why This Stack?
- **Separation of concerns**: Content (JSON) separated from presentation (templates)
- **DRY principle**: Reusable components prevent duplication
- **Maintainability**: Update content once, renders in all templates
- **Bilingual support**: Language variants generated from single JSON source
- **Automated deployment**: GitHub Actions handles build and deploy
- **Low maintenance**: No database, all static files
- **Privacy-first**: Self-hosted fonts, no external tracking
- **CDN-optimized**: Tailwind loads from CDN (fonts are local)

---

## File Structure

```
‚îú‚îÄ‚îÄ src/                                # Source files (input to 11ty)
‚îÇ   ‚îú‚îÄ‚îÄ index.njk                       # Homepage template (generates both ES/EN versions)
‚îÇ   ‚îú‚îÄ‚îÄ _data/                          # Global data files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ es.json                     # Spanish content (site copy, meta tags, etc.)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ en.json                     # English content (same structure, translated)
‚îÇ   ‚îú‚îÄ‚îÄ _includes/                      # Reusable components and layouts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ base.njk                # Main HTML layout (doctype, head, scripts)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nav.njk                 # Navigation bar component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hero.njk                # Hero section component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ about.njk               # About section component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services.njk            # Services section component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modalities.njk          # Modalidades section component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ faq.njk                 # FAQ section component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ booking.njk             # Booking CTA component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ footer.njk              # Footer component
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ floating-button.njk     # WhatsApp floating button
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ meta.njk                # Meta tags component
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ .eleventy.js                # Build configuration
‚îú‚îÄ‚îÄ _site/                              # Output directory (generated by 11ty)
‚îÇ   ‚îú‚îÄ‚îÄ index.html                      # Spanish homepage (generated)
‚îÇ   ‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.html                  # English homepage (generated)
‚îÇ   ‚îú‚îÄ‚îÄ fonts/                          # Copied from src
‚îÇ   ‚îú‚îÄ‚îÄ images/                         # Copied from src
‚îÇ   ‚îî‚îÄ‚îÄ [other generated files]
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ deploy.yml                  # GitHub Actions CI/CD pipeline
‚îú‚îÄ‚îÄ politica-privacidad.html            # Spanish privacy policy (static, not generated)
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ privacy-policy.html             # English privacy policy (static, not generated)
‚îú‚îÄ‚îÄ robots.txt                          # Search engine crawling rules
‚îú‚îÄ‚îÄ CNAME                               # Custom domain configuration
‚îú‚îÄ‚îÄ .eleventy.js                        # Build configuration (passthrough copy, filters)
‚îú‚îÄ‚îÄ package.json                        # npm scripts and dependencies
‚îú‚îÄ‚îÄ package-lock.json                   # npm lock file
‚îú‚îÄ‚îÄ .gitignore                          # Git ignore patterns
‚îú‚îÄ‚îÄ README.md                           # Project documentation for developers
‚îú‚îÄ‚îÄ ROADMAP.md                          # Project roadmap and improvement plan
‚îú‚îÄ‚îÄ CLAUDE.md                           # This file - AI assistant guide
‚îú‚îÄ‚îÄ /fonts/                             # Self-hosted font files (privacy-first)
‚îÇ   ‚îú‚îÄ‚îÄ OpenSans-VariableFont_wdth,wght.ttf
‚îÇ   ‚îî‚îÄ‚îÄ OpenSans-Italic-VariableFont_wdth,wght.ttf
‚îî‚îÄ‚îÄ /images/                            # Image assets
    ‚îú‚îÄ‚îÄ logo.png                        # Professional logo
    ‚îî‚îÄ‚îÄ portrait.jpeg                   # Professional portrait photo
```

### Build Process
1. **Source**: Nunjucks templates in `src/` + JSON data in `src/_data/`
2. **Build**: Running `npm run build` executes 11ty
3. **Output**: Generated HTML files in `_site/` directory
4. **Deploy**: GitHub Actions automatically pushes `_site/` to `gh-pages` branch

### Multilingual Architecture
- **Single source of truth**: Each language has a separate JSON file (`es.json`, `en.json`)
- **Template reuse**: One template generates both language versions
- **Dynamic routes**: 11ty's pagination creates `/index.html` (Spanish) and `/en/index.html` (English)
- **Meta tags**: Language, hreflang, and meta descriptions generated dynamically from JSON
- **Sitemap**: Updated manually in `sitemap.xml` with bilingual URLs

### Static Files (Not Generated)
- **Privacy policies**: `politica-privacidad.html`, `en/privacy-policy.html` (static HTML)
- **Configuration files**: `robots.txt`, `CNAME`
- **Fonts and images**: Copied directly to `_site/` via passthrough copy

---

## Architecture & Design

### Single-Page Application Structure

The website is organized into **5 main sections**, all in `index.html`:

1. **Hero Section** (`#inicio`) - Welcome message with CTA buttons and session info
2. **About Section** (`#sobre-mi`) - Psychologist bio, credentials, and therapeutic approach
3. **Services Section** (`#servicios`) - Specialization areas with detailed service cards
4. **Modalidades Section** (`#modalidades`) - Online and in-person therapy options, session details, pricing
5. **FAQ Section** (`#faq`) - Frequently asked questions (12 common questions)

**Note**: Contact information appears in the footer, not as a separate section. The contact form was intentionally removed in favor of direct WhatsApp booking to reduce friction in the user journey.

### Navigation System
- **Fixed top navigation** with smooth scroll offset (80px for nav height)
- **Mobile hamburger menu** for responsive design
- **Anchor links** to section IDs with smooth scrolling behavior
- **Language switcher** button (EN/ES toggle)

---

## Design System

### Color Palette (Custom Tailwind Config)

```javascript
colors: {
  'forest-green': '#4D7C6A',  // Primary brand color (buttons, hover states, accent)
  'cream': '#F5F3E5',         // Background color (warm, neutral base)
  'navy': '#1D3557',          // Dark blue for text and headings
  'sage': '#93ADA1',          // Secondary accent color (subtle highlights)
  'dark-gray': '#333333'      // Body text color
}
```

### Typography

- **All Text**: Open Sans Variable Font (self-hosted from `/fonts/` directory)
- **Font Classes**: `font-playfair`, `font-open-sans`, and `font-sans` all map to Open Sans
- **Font Weights**: Variable font supports 300-800 (light to extra bold)
- **Font Styles**: Both regular and italic variants available
- **Fallback Stack**: `-apple-system`, `BlinkMacSystemFont`, `Segoe UI`, `Roboto`, `Helvetica`, `Arial`, `sans-serif`
- **Privacy**: Self-hosted (no Google Fonts CDN) to avoid external tracking

### Spacing & Layout
- **Container**: `max-w-7xl mx-auto` (1280px max width, centered)
- **Section Padding**: `py-20` (80px vertical padding)
- **Grid System**: Tailwind's grid with `md:grid-cols-2` and `md:grid-cols-3`

### Component Patterns

#### Service Cards
```html
<div class="service-card bg-white rounded-2xl p-6 shadow-md">
  <!-- Icon circle -->
  <!-- Title -->
  <!-- Description -->
</div>
```
- Hover effect: `transform: translateY(-5px)` + shadow increase
- Icon: Circular colored background with SVG

#### Buttons
- **Primary CTA**: `bg-forest-green text-white rounded-full` (forest green button)
- **Secondary**: `border-2 border-navy text-navy rounded-full` (outline)
- **WhatsApp Float**: Fixed bottom-right floating button with forest green background
- **Hover States**: Buttons use `hover:bg-opacity-90` or `transform: scale(1.05)` for interaction feedback

---

## Bilingual Implementation

### Architecture: JSON + Template Generation

The website uses a **data-driven multilingual architecture** where content is stored in JSON and templates generate language variants:

- **Spanish content**: `/src/_data/es.json` - Contains all Spanish site content
- **English content**: `/src/_data/en.json` - Contains all English site content
- **Single template**: `/src/index.njk` - Generates both `/index.html` and `/en/index.html`
- **Component reuse**: All Nunjucks components use dynamic data, no hard-coded content

### How It Works

1. **JSON as source of truth**: All content is in `es.json` and `en.json`
2. **Template-driven generation**: `index.njk` iterates over both language files
3. **11ty pagination**: Creates two output URLs (one per language)
4. **Dynamic HTML**: Components receive language data and render appropriate content
5. **SEO-optimized**: Meta tags, hreflang, and lang attributes generated from JSON

### Language Switcher Implementation

The language switcher appears in the navigation component:

```nunjucks
<!-- In components/nav.njk -->
{% if lang == 'es' %}
    <a href="/en/" class="px-4 py-2 bg-cream rounded-full">
        <span class="font-bold text-forest-green">ES</span>
        <span class="text-gray-400 mx-2">|</span>
        <span class="text-gray-400">EN</span>
    </a>
{% else %}
    <a href="/" class="px-4 py-2 bg-cream rounded-full">
        <span class="text-gray-400">ES</span>
        <span class="text-gray-400 mx-2">|</span>
        <span class="font-bold text-forest-green">EN</span>
    </a>
{% endif %}
```

### JSON Data Structure

Both `es.json` and `en.json` follow the same structure:

```json
{
  "lang": "es",           // Language code
  "locale": "es_ES",      // Locale for meta tags
  "site": {               // Site-wide info
    "title": "...",
    "url": "...",
    "phone": "...",
    "email": "..."
  },
  "meta": {               // Meta tags for HTML head
    "title": "...",
    "description": "...",
    "keywords": "...",
    "ogImage": "..."
  },
  "nav": { ... },         // Navigation text
  "hero": { ... },        // Hero section content
  "about": { ... },       // About section content
  "services": { ... },    // Services section content
  "modalities": { ... },  // Modalities section content
  "faq": { ... },         // FAQ section content
  "footer": { ... }       // Footer section content
}
```

### Adding New Translatable Content

1. **Add to both JSON files**: Update `src/_data/es.json` and `src/_data/en.json`
2. **Use in templates**: Reference data with `{{ data[lang].section.field }}`
3. **Run build**: `npm run build` to generate new HTML
4. **Example**:
   ```json
   // In es.json
   "newSection": {
     "title": "Nuevo T√≠tulo",
     "description": "Descripci√≥n en espa√±ol"
   }

   // In en.json
   "newSection": {
     "title": "New Title",
     "description": "Description in English"
   }
   ```

   ```nunjucks
   <!-- In template -->
   <h2>{{ data[lang].newSection.title }}</h2>
   <p>{{ data[lang].newSection.description }}</p>
   ```

---

## Key Features & Functionality

### 1. Language Switcher
- **Location**: Top navigation bar (desktop + mobile menu)
- **Type**: URL-based hyperlink (not JavaScript toggle)
- **Spanish Version**: Link to `/en/` - Shows "ES" as active (bold, green)
- **English Version**: Link to `/` - Shows "EN" as active (bold, green)
- **Implementation**: HTML link in `components/nav.njk` - no JavaScript required
- **Template file**: `/src/_includes/components/nav.njk`

### 2. Mobile Menu
- **Trigger**: Hamburger icon button
- **Behavior**: Toggle `hidden` class on mobile menu (vanilla JS)
- **Auto-close**: Clicking any link closes the menu
- **Template file**: `/src/_includes/components/nav.njk`

### 3. Smooth Scrolling
- **Offset**: 80px to account for fixed navigation
- **All anchor links**: Handled via event delegation (vanilla JS)
- **Behavior**: Native CSS `scroll-behavior: smooth` + JS fallback
- **Implementation**: Script in `layouts/base.njk`

### 4. WhatsApp Float Button
- **Position**: Fixed bottom-right corner
- **Responsive**: Shows text on desktop, icon-only on mobile
- **Link Format**: `https://wa.me/34XXXXXXXXX` (phone number from data)
- **Component**: `/src/_includes/components/floating-button.njk`
- **Data source**: `data[lang].site.phone` from JSON files

### 5. SEO & Analytics

#### Structured Data (JSON-LD)
- Schema.org type: `Psychologist`
- Includes: name, location, price range, description, area served
- **Location**: Generated in `layouts/base.njk` from JSON data
- **Data source**: `/src/_data/{es,en}.json` > `meta` section

#### Meta Tags
- **Description**: Optimized for "psic√≥loga online" keywords
- **Keywords**: LGTBIQ+, diversity, migration, anxiety, depression
- **Open Graph**: Social media preview (title, description, image URL)
- **Canonical URL**: https://rociotouzasanchez.com
- **Language tag**: Automatically set to `es` or `en` based on page
- **Hreflang**: Cross-reference links between Spanish and English versions
- **Generation**: All meta tags built from `src/_data/{es,en}.json` in `components/meta.njk`

#### Sitemap
- **File**: sitemap.xml
- **Pages**: Homepage + 4 anchor sections
- **Update Frequency**: Monthly
- **Priorities**: Homepage (1.0), Services (0.9), others (0.7-0.8)

---

## Development Workflows

### Initial Setup

1. **Clone repository**:
   ```bash
   git clone https://github.com/fchiusolo/rocio-touza-sanchez-website.git
   cd rocio-touza-sanchez-website
   ```

2. **Install dependencies**:
   ```bash
   npm install
   ```

3. **Done!** You now have 11ty installed and ready to use.

### Local Development

**Start development server** (with live reload):

```bash
npm run serve
```

- Runs 11ty in serve mode with automatic rebuilding
- Visit `http://localhost:8080` in your browser
- Changes to templates and JSON files auto-reload
- Static files (fonts, images) are served as-is

**One-time build** (generates `_site/` folder):

```bash
npm run build
```

**Clean build artifacts**:

```bash
npm run clean
```

### Making Content Changes

The easiest workflow:

1. **Edit JSON data**: Update text in `src/_data/es.json` or `src/_data/en.json`
2. **Save file**: 11ty automatically rebuilds (if `npm run serve` is running)
3. **See changes**: Page refreshes in browser automatically
4. **Test both languages**: Navigate to `/en/` to verify English version
5. **Commit changes**: Follow git workflow below

**Important**:
- Always update **both** `es.json` and `en.json` for new content
- Keep the JSON structure identical between files
- Use `npm run serve` during development for instant feedback

### Adding New Services

To add a new service in the services section:

1. **Edit JSON files** - Add new entry to both `es.json` and `en.json`:

```json
// In src/_data/es.json - Find "services" object, add:
"services": {
  "title": "Servicios",
  "cards": [
    // ... existing services ...
    {
      "title": "Nuevo Servicio",
      "description": "Descripci√≥n del nuevo servicio",
      "icon": "mdiCheckCircle"  // Material Design Icons name
    }
  ]
}

// In src/_data/en.json - Same structure, English text:
"services": {
  "title": "Services",
  "cards": [
    // ... existing services ...
    {
      "title": "New Service",
      "description": "Description of new service",
      "icon": "mdiCheckCircle"
    }
  ]
}
```

2. **Service template** - The template already loops through services, so it will automatically render your new one:

```nunjucks
<!-- In src/_includes/components/services.njk -->
{% for card in data[lang].services.cards %}
  <div class="service-card bg-white rounded-2xl p-6 shadow-md">
    <div class="w-12 h-12 bg-forest-green/20 rounded-full flex items-center justify-center mb-4">
      <!-- SVG icon rendered from data -->
    </div>
    <h3 class="text-xl font-playfair font-semibold text-navy mb-3">
      {{ card.title }}
    </h3>
    <p class="text-gray-600">{{ card.description }}</p>
  </div>
{% endfor %}
```

3. **Find icon**: Use [Material Design Icons](https://materialdesignicons.com/) - copy the icon name (e.g., `mdiCheckCircle`)

4. **Build and test**:
   ```bash
   npm run build
   # Then test in browser or use npm run serve
   ```

### Testing Checklist

Before committing changes:

- [ ] Build succeeds: `npm run build` completes without errors
- [ ] Both languages render: Visit `/` and `/en/` in browser
- [ ] Content updates appear: Changes to JSON files appear on page
- [ ] Mobile menu opens/closes properly
- [ ] Smooth scrolling works on all anchor links
- [ ] Responsive design looks good (mobile, tablet, desktop)
- [ ] No console errors in browser dev tools
- [ ] Images load correctly (if added)
- [ ] WhatsApp links have correct phone number
- [ ] Accessibility: test with keyboard navigation

---

## Git Workflow

### Branch Naming Convention

This project uses **descriptive branch naming**:

```
claude/{descriptive-name}
```

**Examples**:
- `claude/add-roadmap`
- `claude/ux-improvements-reduce-friction`
- `claude/remove-contact-form`
- `claude/update-color-palette`

**Important**: Branch names MUST start with `claude/` to maintain consistency and enable proper access controls.

### Commit Message Guidelines

Use clear, descriptive commit messages:

```bash
# Good examples
git commit -m "Add contact form validation"
git commit -m "Update service descriptions for clarity"
git commit -m "Fix mobile menu z-index issue"
git commit -m "Add Google Analytics integration"

# Bad examples (avoid)
git commit -m "updates"
git commit -m "fix"
git commit -m "changes"
```

### Deployment Process

1. **Create feature branch** from main:
   ```bash
   git checkout main
   git pull origin main
   git checkout -b claude/descriptive-name
   ```

2. **Make changes** on your feature branch

3. **Test locally** (open index.html in browser)

4. **Commit changes**:
   ```bash
   git add .
   git commit -m "Descriptive message"
   ```

5. **Push to remote**:
   ```bash
   git push -u origin claude/your-branch-name
   ```

6. **Create Pull Request** (see PR creation section below)

7. **Wait for approval** - Main branch is protected, requires PR approval

8. **After merge** - GitHub Pages automatically deploys from main branch

**IMPORTANT**:
- ‚õî **Main branch is PROTECTED** - Direct pushes are blocked
- ‚úÖ **All changes require Pull Requests** with approval
- ‚úÖ **Always work on feature branches** starting with `claude/`

---

## Integrations

### ‚úÖ WhatsApp Integration (CONFIGURED)

**Status**: Fully integrated and functional

**Implementation**:
- Direct WhatsApp booking links throughout the site
- Floating WhatsApp button (bottom-right, fixed position)
- Pre-filled message templates for user convenience
- Mobile-optimized with responsive design

**Link Format**: `https://wa.me/[COUNTRY_CODE][PHONE_NUMBER]?text=[MESSAGE]`

**Locations**:
- Navigation bar "Reservar" button
- Hero section CTA buttons
- Floating action button
- Footer contact section

**UX Decision**: WhatsApp-only booking was chosen to minimize friction. Contact forms were intentionally removed to streamline the user journey directly to conversation.

### ‚ùå Google Analytics (NOT IMPLEMENTED)

**Status**: Intentionally not using analytics

**Reason**: Privacy-first approach. The website uses NO tracking, cookies, or analytics to respect user privacy and comply with GDPR/LOPD without requiring cookie consent banners.

**Alternative**: For traffic insights, use server logs or privacy-respecting alternatives if needed (e.g., Plausible Analytics, self-hosted Matomo).

### üìÑ Privacy Policy Pages (IMPLEMENTED)

**Status**: Fully implemented

**Files**:
- `/privacy-policy.html` - English version
- `/politica-privacidad.html` - Spanish version

**Content**: Details data handling, user rights under GDPR/LOPD, and confirms cookie-free browsing experience.

---

## SEO Optimization

### Current SEO Features

- ‚úÖ Semantic HTML5 structure
- ‚úÖ Meta description and keywords
- ‚úÖ Open Graph tags for social sharing
- ‚úÖ JSON-LD structured data (Schema.org Psychologist type)
- ‚úÖ Sitemap.xml with proper priorities
- ‚úÖ Robots.txt allowing all crawlers
- ‚úÖ Mobile-responsive design
- ‚úÖ Fast loading (self-hosted fonts, minimal JS)
- ‚úÖ Proper heading hierarchy (H1 ‚Üí H2 ‚Üí H3)
- ‚úÖ Alt text for images
- ‚úÖ Canonical URL configuration
- ‚úÖ Privacy policy pages (bilingual)
- ‚úÖ Cookie-free (no analytics tracking = better privacy compliance)

### SEO Maintenance Tasks

**When updating content**:
1. Update `<meta name="description">` if main focus changes
2. Update JSON-LD structured data for business info changes
3. Update `sitemap.xml` lastmod dates when sections change
4. Update Open Graph image when adding og-image.jpg

**Performance optimization**:
- Images: Use WebP format, optimize to <200KB
- Fonts: Already optimized with `font-display: swap`
- Scripts: Minimal vanilla JS, no heavy frameworks

---

## Accessibility (a11y) Features

### Current Implementation

- ‚úÖ Semantic HTML (nav, section, footer, etc.)
- ‚úÖ `lang` attribute on `<html>` (updates with language switcher)
- ‚úÖ ARIA labels on interactive elements (e.g., WhatsApp button)
- ‚úÖ Keyboard navigation support (smooth scroll works with Enter key)
- ‚úÖ Sufficient color contrast ratios
- ‚úÖ Responsive text sizing
- ‚úÖ Focus states on interactive elements

### Accessibility Improvements Needed

- ‚ö†Ô∏è Add alt text to images when they're added
- ‚ö†Ô∏è Add ARIA labels to mobile menu button
- ‚ö†Ô∏è Add skip-to-content link for keyboard users
- ‚ö†Ô∏è Test with screen readers (NVDA, JAWS, VoiceOver)
- ‚ö†Ô∏è Add form validation messages for contact form

---

## Content Management

### Updating Text Content

All text is centralized in JSON files for easy maintenance:

1. **Find the section**: Look in `src/_data/es.json` or `src/_data/en.json`
2. **Update both files**: Make identical structure changes in both language files
3. **Build site**: Run `npm run build` to generate new HTML
4. **Verify**: Check both language versions render correctly

**Example - Change pricing from 60‚Ç¨ to 70‚Ç¨**:

```json
// In src/_data/es.json - Find hero section:
"hero": {
  "sessionPrice": "70‚Ç¨ por sesi√≥n",
  // ... other content ...
}

// In src/_data/en.json - Same structure:
"hero": {
  "sessionPrice": "‚Ç¨70 per session",
  // ... other content ...
}
```

Then run: `npm run build`

### Finding Content Locations in JSON

The JSON structure mirrors the website sections:

```json
{
  "nav": { ... },           // Navigation text
  "hero": { ... },          // Hero section (title, CTA, pricing)
  "about": { ... },         // About section (bio, credentials)
  "services": { ... },      // Services section (service cards)
  "modalities": { ... },    // Modalities section (online/in-person, pricing)
  "faq": { ... },           // FAQ section (question/answer pairs)
  "footer": { ... },        // Footer section (contact, copyright)
  "site": { ... },          // Site-wide info (phone, email, address)
  "meta": { ... }           // Meta tags (title, description, keywords, OG)
}
```

### Updating Contact Information

**Email**: Update in `src/_data/{es,en}.json`:
```json
"site": {
  "email": "rociotouzasanchez@outlook.com"
}
```

**Phone**: Update in `src/_data/{es,en}.json`:
```json
"site": {
  "phone": "+34-633-779-016"
}
```

**Location**: Update in `src/_data/{es,en}.json`:
```json
"site": {
  "location": "Barcelona",
  "country": "Espa√±a"
}
```

**Professional Credentials**: Update in both JSON files:
```json
"about": {
  "credentials": "Psic√≥loga General Sanitaria (n¬∫ 33914). ..."
}
```

### Adding Images

**Professional Portrait**:
1. Add `rocio-portrait.jpg` to `/images/` directory
2. Update `src/_data/es.json` to reference it (if needed in templates)
3. Image is already configured in components if using standard path

**Social Media Preview (Open Graph)**:
1. Add `og-image.jpg` (1200x630px) to root directory
2. Reference in `src/_data/{es,en}.json`:
```json
"meta": {
  "ogImage": "https://rociotouzasanchez.com/og-image.jpg"
}
```

3. Build and deploy: `npm run build`

### Workflow for Content Updates

**For simple text updates**:
1. Edit JSON file (es.json and/or en.json)
2. Save file (auto-rebuild if using `npm run serve`)
3. Check browser (page auto-refreshes)
4. Commit and push to GitHub
5. GitHub Actions auto-deploys

**For adding new components**:
1. Create new Nunjucks template in `src/_includes/components/`
2. Add data structure to both JSON files
3. Include component in `src/index.njk`
4. Run `npm run build` to generate HTML
5. Test both languages
6. Commit and push

---

## Common Tasks for AI Assistants

### Task: Update Service Descriptions

1. Open `src/_data/es.json` and `src/_data/en.json`
2. Find the `"services"` section > `"cards"` array
3. Locate the specific service card by title
4. Update both `title` and `description` fields
5. Keep identical structure between ES and EN files
6. Run `npm run build` to generate new HTML
7. Test in both language versions

**Example**:
```json
{
  "title": "Ansiedad",
  "description": "Acompa√±amiento para estados de ansiedad...",
  "icon": "mdiHeartHandshake"
}
```

### Task: Change Color Scheme

1. Colors defined in Tailwind custom classes at top of templates
2. Main colors: `forest-green`, `cream`, `navy`, `sage`, `dark-gray`
3. To change: Find and replace in Nunjucks files (e.g., `bg-forest-green` ‚Üí `bg-blue-600`)
4. Alternative: Modify Tailwind config directly (requires rebuild)
5. Test contrast ratios for accessibility
6. Build and deploy: `npm run build && git add . && git commit && git push`

### Task: Add New Section

1. **Create component**: New file in `src/_includes/components/new-section.njk`
2. **Add data**: Update `src/_data/es.json` and `src/_data/en.json` with section content
3. **Include component**: Add to `src/index.njk` in appropriate location
4. **Add to nav**: Update `nav.section` in both JSON files with link
5. **Update sitemap**: Add new anchor URL to `sitemap.xml`
6. **Build and test**: `npm run build` ‚Üí test both languages
7. **Commit**: `git add . && git commit -m "Add new section"` ‚Üí push

### Task: Fix Responsive Issues

1. Open dev tools (F12) on generated HTML file
2. Use device toolbar to test mobile (< 768px), tablet (768-1024px), desktop (> 1024px)
3. Issues usually in Nunjucks templates (`.njk` files)
4. Use Tailwind responsive prefixes: `md:`, `lg:`, `xl:` (e.g., `md:grid-cols-2`)
5. Edit in `src/_includes/components/` - not generated files
6. Rebuild: `npm run build`
7. Test both language versions

### Task: Optimize for SEO

1. **Keywords**: Update in `src/_data/{es,en}.json` > `meta.keywords`
2. **Description**: Update in `meta.description` field
3. **Meta tags**: All generated from JSON in `components/meta.njk`
4. **Structured Data**: Update in `layouts/base.njk` if needed (JSON-LD)
5. **Sitemap**: Manually update `sitemap.xml` with new pages and lastmod dates
6. **Headings**: Check templates for proper H1 ‚Üí H2 ‚Üí H3 hierarchy
7. **Links**: Test all internal and external links work after build
8. **Build**: `npm run build` ‚Üí test in browser ‚Üí commit

### Task: Update Pricing

1. Open `src/_data/es.json` and `src/_data/en.json`
2. Find section containing price (usually `hero.sessionPrice` or `modalities.pricing`)
3. Update Spanish version in es.json
4. Update English version in en.json with equivalent
5. Search other sections if pricing mentioned elsewhere
6. Run `npm run build`
7. Verify both language pages show new price

### Task: Deploy to Live Site

1. **Make your changes** in `src/` directory (JSON, templates, etc.)
2. **Test locally**: `npm run serve` ‚Üí view at localhost:8080
3. **Build**: `npm run build` to generate `_site/`
4. **Commit changes**:
   ```bash
   git add .
   git commit -m "Descriptive message of changes"
   git push origin claude/your-branch-name
   ```
5. **Create Pull Request** on GitHub
6. **Wait for approval** (main branch is protected)
7. **After merge to main**: GitHub Actions automatically:
   - Runs `npm install`
   - Runs `npm run build`
   - Deploys `_site/` folder to `gh-pages` branch
   - Site updates at rociotouzasanchez.com

### Task: Create New Bilingual Page

1. **Create data** for each language in JSON (if not already there)
2. **Create template**: New `.njk` file in `src/`
3. **Set up pagination** (see `src/index.njk` for example)
4. **Include layout**: Extend `layouts/base.njk`
5. **Reference data**: Use `{{ data[lang].section.field }}`
6. **Test both versions**: `/new-page/` and `/en/new-page/`
7. **Update sitemap**: Add both language URLs
8. **Commit and push**

---

## Code Conventions & Best Practices

### Nunjucks Templates (.njk files)

- **Indentation**: 2 spaces (11ty convention)
- **Variable syntax**: `{{ variable }}` for output
- **Logic**: `{% if condition %}...{% endif %}` for conditionals
- **Loops**: `{% for item in array %}...{% endfor %}`
- **Includes**: `{% include "components/component-name.njk" %}`
- **Extends**: `{% extends "layouts/base.njk" %}` for layouts
- **Filters**: Custom filters defined in `.eleventy.js`
- **Comments**: `{# Comment #}` for Nunjucks comments
- **Data access**: `{{ data[lang].section.field }}` to access JSON content

### JSON Data Files

- **Indentation**: 2 spaces
- **Structure**: Keep identical between `es.json` and `en.json`
- **Naming**: Use camelCase for keys (e.g., `sessionPrice`, `ctaPrimary`)
- **Language sections**: Organize by page/component (nav, hero, about, services, etc.)
- **Comments**: Use `//` comments (note: JSON doesn't support comments, use in docs)
- **Strings**: Double quotes always
- **Arrays**: Use for lists (services cards, FAQ items, etc.)

### CSS (Tailwind)

- **Utilities**: Use Tailwind classes instead of custom CSS when possible
- **Custom Styles**: Only in `<style>` blocks if absolutely necessary
- **Responsive Design**: Mobile-first, use `md:` and `lg:` prefixes (e.g., `md:grid-cols-2`)
- **Hover States**: Use `hover:` prefix for interactive elements
- **Colors**: Use custom colors defined in Tailwind config

### JavaScript

- **Style**: ES6+ syntax (vanilla JS only)
- **Scope**: Keep in separate `<script>` tags in base layout
- **Event Listeners**: Attach once, avoid memory leaks
- **No Dependencies**: Pure vanilla JS, no jQuery or frameworks
- **Comments**: Use `//` for inline, `/* */` for blocks

### 11ty Configuration (.eleventy.js)

- **Passthrough Copy**: Configure files/folders that should copy unchanged to output
- **Filters**: Custom Nunjucks filters for template processing
- **Input/Output**: Configured to use `src/` input and `_site/` output
- **Collection API**: Available for complex content organization (if needed)

### Git

- **Branch Names**: Always start with `claude/` (required for access control)
- **Commits**: Descriptive messages, present tense
  - Good: "Update service descriptions and pricing"
  - Bad: "updated stuff" or "fix"
- **Pull Requests**: Include description of changes and testing done
- **Never commit**: Generated `_site/` folder, `node_modules/`, `.DS_Store`

---

## Troubleshooting

### Issue: Build Fails (`npm run build`)

**Symptoms**: Error message when running `npm run build`

**Common Causes**:
1. **Missing dependencies**: Run `npm install`
2. **JSON syntax error**: Check `src/_data/es.json` and `src/_data/en.json` for invalid JSON
   - Use online JSON validator: https://jsonlint.com/
   - Check for missing commas, quotes, or brackets
3. **Template syntax error**: Check `.njk` files for Nunjucks errors
   - Verify `{% %}` and `{{ }}` syntax
   - Check for mismatched tags (e.g., `{% if %}` without `{% endif %}`)
4. **Missing includes**: Ensure all included files exist in `src/_includes/`

**Solutions**:
```bash
# Clean and rebuild
npm run clean
npm install
npm run build

# Or rebuild with verbose output
npm run build -- --debug
```

### Issue: Changes Not Appearing in Browser

**Symptoms**: Edited JSON or template but changes don't show

**Solutions**:
1. **If using `npm run serve`**: Wait a few seconds for auto-rebuild, then refresh page
2. **Check output folder**: Look at `_site/index.html` to see if changes are there
3. **Hard refresh browser**: Ctrl+Shift+R (Windows) or Cmd+Shift+R (Mac)
4. **Rebuild manually**: `npm run build` then refresh
5. **Check file saved**: Verify you saved the file in your editor
6. **Correct file location**: Editing files in wrong directory
   - Edit in `src/`, not `_site/`
   - `_site/` is generated and will be overwritten

### Issue: Language Not Switching Properly

**Symptoms**: EN/ES button doesn't navigate to other language version

**Solutions**:
1. **Check link URLs**: In `src/_includes/components/nav.njk`, verify:
   - Spanish version has `href="/en/"`
   - English version has `href="/"`
2. **Build required**: Changes to navigation require rebuild
   ```bash
   npm run build
   npm run serve  # to see changes
   ```
3. **Test both URLs**: Visit `http://localhost:8080/` and `http://localhost:8080/en/`
4. **Check that index exists**: Ensure both `_site/index.html` and `_site/en/index.html` exist

### Issue: Mobile Menu Stuck Open/Closed

**Symptoms**: Hamburger icon doesn't toggle menu, or menu doesn't close on click

**Solutions**:
1. Check console for JavaScript errors (F12 ‚Üí Console tab)
2. Verify script is loaded in `src/_includes/layouts/base.njk`
3. Ensure `mobileMenuBtn` and `mobileMenu` IDs exist in nav component
4. Rebuild and clear cache:
   ```bash
   npm run clean
   npm run build
   npm run serve
   ```
5. Test in different browser

### Issue: JSON Content Not Rendering in Templates

**Symptoms**: Variables show as blank or undefined text in page

**Solutions**:
1. **Check data structure**: Verify JSON has expected keys
   - Use `{{ data[lang] | dump }}` temporarily to debug (shows all data)
2. **Verify language variable**: Ensure `lang` is being set correctly
3. **Check JSON syntax**: Validate at https://jsonlint.com/
4. **Correct path reference**: Template should use `{{ data[lang].section.field }}`
   - Not `{{ data.es.section.field }}` (must use dynamic `lang`)

### Issue: Images Not Loading in Generated Site

**Symptoms**: 404 errors or broken image icons

**Solutions**:
1. **Check passthrough copy**: Ensure `images/` is configured in `.eleventy.js`
2. **Files in correct location**: Images should be in `/images/` at root level
3. **Rebuild and check output**:
   ```bash
   npm run build
   ls -la _site/images/  # Check if images were copied
   ```
4. **Check image paths in templates**: Should be `/images/filename.jpg` (absolute path from root)
5. **File names case-sensitive**: Linux/Mac are case-sensitive - match exactly

### Issue: Smooth Scrolling Not Working

**Symptoms**: Clicking nav links jumps instead of smooth scrolling

**Solutions**:
1. **Check CSS**: Verify `html { scroll-behavior: smooth; }` is set
2. **JavaScript verification**: Script should be in `src/_includes/layouts/base.njk`
3. **Test after rebuild**: `npm run build && npm run serve`
4. **Check anchor links**: All nav links should point to section IDs (e.g., `href="#servicios"`)
5. **Browser support**: Most modern browsers support this natively

### Issue: Git Push Fails (403 Error)

**Symptoms**: `git push` returns 403 Forbidden

**Solutions**:
1. **Branch name**: Must start with `claude/`
   ```bash
   git branch -m old-name claude/descriptive-name
   ```
2. **Check permissions**: Verify you have push access to repo
3. **Try alternate syntax**:
   ```bash
   git push -u origin HEAD
   ```
4. **Verify remote**: Check `git remote -v` points to correct repo
5. **Test with different file**: Try pushing a simple change first

### Issue: GitHub Actions Deployment Failed

**Symptoms**: Build works locally but fails on GitHub Actions

**Solutions**:
1. **Check workflow logs**: Go to GitHub repo ‚Üí Actions tab ‚Üí see error messages
2. **Verify Node version**: Workflow uses Node 18 - check compatibility
3. **npm ci vs npm install**: Workflow uses `npm ci` (cleaner install)
4. **Deps missing**: Ensure `package-lock.json` is committed
   ```bash
   git add package-lock.json
   git commit -m "Update dependencies"
   git push
   ```
5. **Check .gitignore**: Ensure `node_modules/` is in `.gitignore` (should be)

---

## Performance Optimization

### Current Performance

**Strengths**:
- ‚úÖ No build step = instant deploys
- ‚úÖ CDN-hosted assets (Tailwind, Google Fonts)
- ‚úÖ Minimal JavaScript (~60 lines)
- ‚úÖ No external dependencies
- ‚úÖ Static HTML (fast server response)

**Opportunities for Improvement**:
- ‚ö†Ô∏è Add image optimization (WebP, lazy loading)
- ‚ö†Ô∏è Inline critical CSS (Tailwind utilities used)
- ‚ö†Ô∏è Add service worker for offline support
- ‚ö†Ô∏è Implement font subsetting (only needed glyphs)
- ‚ö†Ô∏è Minify HTML/CSS/JS for production

### Performance Monitoring

**Tools to Use**:
- [PageSpeed Insights](https://pagespeed.web.dev/)
- [GTmetrix](https://gtmetrix.com/)
- [WebPageTest](https://www.webpagetest.org/)
- Chrome DevTools Lighthouse

**Target Metrics**:
- Largest Contentful Paint (LCP): < 2.5s
- First Input Delay (FID): < 100ms
- Cumulative Layout Shift (CLS): < 0.1
- Time to Interactive (TTI): < 3.5s

---

## Security Considerations

### Current Security Posture

**Good Practices**:
- ‚úÖ Static HTML (no server-side vulnerabilities)
- ‚úÖ HTTPS enforced via GitHub Pages + custom domain
- ‚úÖ No sensitive data in codebase
- ‚úÖ No authentication/authorization (not needed)
- ‚úÖ Self-hosted fonts (no third-party CDN tracking)
- ‚úÖ No analytics or tracking scripts
- ‚úÖ Privacy-first architecture

**Future Considerations** (if adding features):
- If adding third-party services: Validate embed codes, use CSP headers
- If adding forms: Implement CSRF protection, rate limiting
- If adding analytics: Use privacy-respecting alternatives (Plausible, Matomo)

---

## Privacy & Cookie Policy

### Cookie-Free Implementation

This website is intentionally designed with **zero cookies and zero tracking**:

**What We DON'T Use**:
- ‚ùå Google Analytics or any analytics platform
- ‚ùå Cookie consent banners (not needed!)
- ‚ùå Third-party tracking pixels
- ‚ùå Session cookies for browsing
- ‚ùå Marketing/advertising cookies
- ‚ùå Social media tracking scripts

**Why Cookie-Free?**:
- **Privacy-first**: Users can browse anonymously
- **GDPR/LOPD Compliance**: No cookie consent required
- **Performance**: Faster page loads without tracking scripts
- **Trust**: Demonstrates commitment to user privacy

### Privacy Policy Pages

**Files**:
- `/privacy-policy.html` - English version
- `/politica-privacidad.html` - Spanish version

**Content Covered**:
- Data controller information
- What data is collected (minimal: only name/email for therapy sessions via Google Meet)
- Legal basis for processing (consent, legitimate interest)
- User rights under GDPR/LOPD (access, rectification, deletion, portability)
- How to exercise rights
- Data retention policies
- Third-party processors (Google Meet for video sessions)

**Key Point**: Website browsing generates NO data collection. Only therapy clients who book sessions provide personal information.

### Philosophy

**Privacy-First Development**:
1. Only collect data absolutely necessary for service delivery
2. No passive tracking of website visitors
3. Transparent about what data is collected and why
4. Self-hosted assets to avoid external tracking
5. Easy for users to exercise their privacy rights

---

## Future Enhancements

**Note**: See `ROADMAP.md` for the complete improvement plan with priorities and GitHub issues.

### Completed ‚úÖ

- ‚úÖ Add professional portrait image (exists as `images/portrait.jpeg`)
- ‚úÖ Configure WhatsApp integration
- ‚úÖ Implement FAQ section (12 questions)
- ‚úÖ Privacy policy pages (bilingual)

### Still Needed

**High Priority** (see ROADMAP.md for details):
- [ ] Photo session for improved professional images
- [ ] Copywriting review and content refinement
- [ ] Color palette adjustments (if needed based on user feedback)
- [ ] SEO optimization (Barcelona-focused keywords, structured data improvements)
- [ ] Google Business Profile optimization
- [ ] Submit to professional directories (Doctoralia, Top Doctors, etc.)

**Medium Priority**:
- [ ] Add testimonials/reviews section
- [ ] Blog/articles section for SEO content
- [ ] Social media links (if business strategy evolves)

**Low Priority**:
- [ ] Dark mode toggle
- [ ] Downloadable resources (therapy worksheets, PDFs)
- [ ] Video introduction/welcome message
- [ ] Additional language support (e.g., Catalan)

### Explicitly NOT Planned

- ‚ùå Google Analytics (conflicts with privacy policy)
- ‚ùå Contact forms (WhatsApp-only booking by design)
- ‚ùå Cookie consent banners (not needed, cookie-free site)
- ‚ùå Doctoralia widget (directory listing yes, widget no)
- ‚ùå Google Maps embed (privacy concern, just show address)

---

## Resources & Documentation

### Tailwind CSS
- [Documentation](https://tailwindcss.com/docs)
- [Cheat Sheet](https://nerdcave.com/tailwind-cheat-sheet)
- [Custom Configuration](https://tailwindcss.com/docs/configuration)

### Icons
- [Material Design Icons](https://materialdesignicons.com/) (currently used)
- [Heroicons](https://heroicons.com/) (alternative)
- [Font Awesome](https://fontawesome.com/) (alternative)

### SEO
- [Google Search Console](https://search.google.com/search-console)
- [Schema.org](https://schema.org/Psychologist) (structured data)
- [Open Graph Protocol](https://ogp.me/)

### Accessibility
- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)
- [WAVE Browser Extension](https://wave.webaim.org/extension/)

### GitHub Pages
- [Documentation](https://docs.github.com/en/pages)
- [Custom Domain Setup](https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site)
- [Jekyll Configuration](https://jekyllrb.com/docs/configuration/)

---

## Contact & Support

**Website Owner**: Roc√≠o Touza Sanchez (Professional Psychologist)
**Domain**: https://rociotouzasanchez.com
**Repository**: fchiusolo/rocio-touza-sanchez-website

**For Contact Information**: Visit the live website for current contact details (email, phone, booking links).

**For AI Assistants**: When working on this project, always:
1. Test changes locally before committing
2. Verify both language versions (ES/EN)
3. Check responsive design on mobile (< 768px, 768-1024px, > 1024px)
4. Follow git branch naming convention: `claude/{descriptive-name}`
5. Write descriptive commit messages
6. Maintain existing code style and conventions
7. **Never commit private information** (phone numbers, emails, professional IDs) to public documentation files
8. Use placeholders in docs: `info@example.com`, `+XX XXX XXX XXX`, `XXXXX`
9. Respect the privacy-first philosophy (no tracking, no analytics)

---

**Last Updated**: December 18, 2025
**Version**: 4.0.0 - 11ty Build System Implementation
**Maintained By**: Claude AI Assistant

## Recent Changes (v4.0.0)

**11ty Static Site Generator Implementation** (December 18, 2025):
- ‚úÖ Migrated from static HTML to 11ty (Eleventy) build system
- ‚úÖ Implemented JSON-based content management (es.json, en.json)
- ‚úÖ Created reusable Nunjucks components for all sections
- ‚úÖ Set up automated GitHub Actions CI/CD pipeline
- ‚úÖ Content now centralized in `src/_data/` with single source of truth
- ‚úÖ Bilingual pages generated from single template using pagination
- ‚úÖ npm scripts for local development: `npm run serve`, `npm run build`
- ‚úÖ Updated .gitignore to exclude `_site/` and `node_modules/`
- ‚úÖ Simplified content editing workflow (edit JSON, rebuild)
- ‚úÖ Automatic deployment on push to main branch
- üìã Updated all documentation to reflect new build process

### Migration Details
- **Before**: Static HTML files (index.html, en/index.html) edited directly
- **After**:
  - Content stored in `src/_data/es.json` and `src/_data/en.json`
  - Template: `src/index.njk` generates both language versions
  - Components in `src/_includes/components/` (nav, hero, about, etc.)
  - Build output: `_site/` directory with generated HTML
  - Deployment: Automated via GitHub Actions on push to main
