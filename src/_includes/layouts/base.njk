<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    {% include "meta.njk" %}

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'forest-green': '#4D7C6A',
                        'cream': '#F5F3E5',
                        'navy': '#1D3557',
                        'sage': '#93ADA1',
                        'dark-gray': '#333333'
                    },
                    fontFamily: {
                        'playfair': ['Open Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                        'open-sans': ['Open Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                        'sans': ['Open Sans', '-apple-system', 'BlinkMacSystemFont', 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif']
                    }
                }
            }
        }
    </script>

    <style>
        /* Open Sans Variable Font */
        @font-face {
            font-family: 'Open Sans';
            src: url('{{ imagePath }}fonts/OpenSans-VariableFont_wdth,wght.ttf') format('truetype-variations');
            font-weight: 300 800;
            font-stretch: 75% 100%;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Open Sans';
            src: url('{{ imagePath }}fonts/OpenSans-Italic-VariableFont_wdth,wght.ttf') format('truetype-variations');
            font-weight: 300 800;
            font-stretch: 75% 100%;
            font-style: italic;
            font-display: swap;
        }

        body {
            font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Open Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }
        .booking-float {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #4D7C6A;
            color: white;
            border-radius: 50px;
            padding: 15px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            transition: transform 0.3s ease;
        }
        .booking-float:hover {
            transform: scale(1.05);
        }
        .nav-link {
            transition: color 0.3s ease;
        }
        .nav-link:hover {
            color: #4D7C6A;
        }
        .service-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-cream text-dark-gray">

    {% include "components/nav.njk" %}

    {{ content | safe }}

    {% include "components/footer.njk" %}

    {% include "components/floating-button.njk" %}

    <script>
        // Mobile Menu Toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');

        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
                const isExpanded = !mobileMenu.classList.contains('hidden');
                mobileMenuBtn.setAttribute('aria-expanded', isExpanded);
            });

            // Close mobile menu when clicking a link
            const mobileLinks = mobileMenu.querySelectorAll('a');
            mobileLinks.forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    mobileMenuBtn.setAttribute('aria-expanded', 'false');
                });
            });
        }

        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(button => {
            button.addEventListener('click', () => {
                const answer = button.nextElementSibling;
                const icon = button.querySelector('.faq-icon');
                const isExpanded = button.getAttribute('aria-expanded') === 'true';

                // Close all other open FAQs
                document.querySelectorAll('.faq-answer').forEach(otherAnswer => {
                    if (otherAnswer !== answer) {
                        otherAnswer.classList.add('hidden');
                        otherAnswer.previousElementSibling.setAttribute('aria-expanded', 'false');
                        otherAnswer.previousElementSibling.querySelector('.faq-icon').style.transform = '';
                    }
                });

                // Toggle current FAQ
                answer.classList.toggle('hidden');
                button.setAttribute('aria-expanded', !isExpanded);
                icon.style.transform = !isExpanded ? 'rotate(180deg)' : '';
            });
        });

        // Services Accordion (toggleAccordion function)
        function toggleAccordion(button) {
            const content = button.nextElementSibling;
            const icon = button.querySelector('.accordion-icon');
            const isOpen = !content.classList.contains('hidden');

            // Close all accordions
            document.querySelectorAll('.accordion-content').forEach(item => {
                item.classList.add('hidden');
            });
            document.querySelectorAll('.accordion-icon').forEach(item => {
                item.style.transform = '';
            });

            // Open clicked accordion if it was closed
            if (!isOpen) {
                content.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            }
        }

        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                const href = this.getAttribute('href');
                if (href !== '#' && href !== '') {
                    e.preventDefault();
                    const target = document.querySelector(href);
                    if (target) {
                        const offset = 80; // Height of fixed nav
                        const targetPosition = target.offsetTop - offset;
                        window.scrollTo({
                            top: targetPosition,
                            behavior: 'smooth'
                        });
                    }
                }
            });
        });
    </script>
</body>
</html>
